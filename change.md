# 项目架构变更计划

~~自己就制造的zz操作，总要自己解决~~

## 内网客户端

- 数据同步方式

    由请求刷新更新为直接刷新
        
        保持socket连接，加入socket连接认证，加入断开重连
        
    数据格式
    
        维持原状
        
    加入HTTP 302状态回调
        
        302状态： 返回带ErrMsg的信息，停止throw runtimeexception的做法
        
    
## 外网客户端

- 数据同步方式

    请求处理
    
        收到查询请求 -> 查询数据库：
        
        - 有： 返回结果
        
        - 无： 
        
            - 有校内socket连接
            
                尝试： 设置超时时间，直接查询【加入查询队列】
                
                    - 成功： 返回结果
                    
                    - 失败： 返回提示
                    
            - 无校内连接
            
                返回提示
                
    查询队列
        
        更新数据插入逻辑：有数据插入时直接发起请求
        
        新建：正在进行查询user列表【考虑设置超时】
                    
    HTTP 302状态回调
    
        新建【HTTP 302 队列】：对出现 HTTP 302的用户【根据IP 和 用户名 进行警告】